{"ast":null,"code":"import classNames from\"classnames\";import qs from\"query-string\";import React,{useRef,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{radarNameShort}from\"../../config\";import{useMessages}from\"../../context/MessagesContext\";import{useSearchParamState}from\"../../hooks/use-search-param-state\";import Branding from\"../Branding/Branding\";import Link from\"../Link/Link\";import LogoLink from\"../LogoLink/LogoLink\";import Search from\"../Search/Search\";import TagsModal from\"../TagsModal/TagsModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Header(_ref){let{pageName,tags}=_ref;const[searchOpen,setSearchOpen]=useState(false);const[search,setSearch]=useState(\"\");const{searchLabel,pageHelp,pageOverview}=useMessages();const navigate=useNavigate();const searchRef=useRef(null);const[searchParamState,setSearchParamsState]=useSearchParamState();const openSearch=()=>{setSearchOpen(true);};const closeSearch=()=>{setSearchOpen(false);};const handleSearchChange=value=>{setSearch(value);};const handleSearchSubmit=()=>{let{tags}=searchParamState;tags=Array.isArray(tags)?tags.join(\"|\"):tags;navigate({pathname:\"/overview.html\",search:qs.stringify({search:search,tags})});setSearchOpen(false);setSearch(\"\");};const handleOpenClick=e=>{// e.preventDefault(); // todo used to be a link\nopenSearch();setTimeout(()=>{var _searchRef$current;searchRef===null||searchRef===void 0?void 0:(_searchRef$current=searchRef.current)===null||_searchRef$current===void 0?void 0:_searchRef$current.focus();},0);};const handleTagChange=tag=>{const{search,tags=[]}=searchParamState;let newTags;// Toggle changed item in tags searchParam depends on type Array or String\nif(Array.isArray(tags)){newTags=tags.includes(tag)?tags.filter(item=>item!==tag):[...tags,tag];}else{newTags=tags!==tag?[tags,tag]:[];}setSearchParamsState({tags:newTags,search});};const[modalIsOpen,setModalIsOpen]=useState(false);const toggleModal=function(){setModalIsOpen(!modalIsOpen);};const smallLogo=pageName!==\"index\";return/*#__PURE__*/_jsx(Branding,{logoContent:/*#__PURE__*/_jsx(LogoLink,{small:smallLogo}),children:/*#__PURE__*/_jsxs(\"div\",{className:\"nav\",children:[pageHelp&&/*#__PURE__*/_jsx(\"div\",{className:\"nav__item\",children:/*#__PURE__*/_jsxs(Link,{pageName:\"help-and-about-tech-radar\",className:\"icon-link\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon icon--question icon-link__icon\"}),pageHelp.headlinePrefix||\"How to use\",\" \",radarNameShort,\"?\"]})}),Boolean(tags.length)&&/*#__PURE__*/_jsx(\"div\",{className:\"nav__item\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"icon-link\",onClick:toggleModal,children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon icon--filter icon-link__icon\"}),\"Filter\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"nav__item\",children:/*#__PURE__*/_jsxs(Link,{pageName:\"overview\",className:\"icon-link\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon icon--overview icon-link__icon\"}),(pageOverview===null||pageOverview===void 0?void 0:pageOverview.title)||\"Technologies Overview\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav__item\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"icon-link\",onClick:handleOpenClick,children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon icon--search icon-link__icon\"}),searchLabel||\"Search\"]}),/*#__PURE__*/_jsx(\"div\",{className:classNames(\"nav__search\",{\"is-open\":searchOpen}),children:/*#__PURE__*/_jsx(Search,{value:search,onClose:closeSearch,onSubmit:handleSearchSubmit,onChange:handleSearchChange,open:searchOpen,ref:searchRef})}),Boolean(tags.length)&&/*#__PURE__*/_jsx(TagsModal,{tags:tags,isOpen:modalIsOpen,closeModal:toggleModal,handleTagChange:handleTagChange})]})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}