{"ast":null,"code":"import{useEffect,useState}from\"react\";import{translate}from\"../../config\";import{useMessages}from\"../../context/MessagesContext\";import{groupByFirstLetter}from\"../../model\";import Badge from\"../Badge/Badge\";import Fadeable from\"../Fadeable/Fadeable\";import Flag from\"../Flag/Flag\";import HeadlineGroup from\"../HeadlineGroup/HeadlineGroup\";import HeroHeadline from\"../HeroHeadline/HeroHeadline\";import Link from\"../Link/Link\";import Search from\"../Search/Search\";import SetTitle from\"../SetTitle\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const containsSearchTerm=function(){let text=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";let term=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"\";// TODO search refinement\nreturn text.trim().toLocaleLowerCase().indexOf(term.trim().toLocaleLowerCase())!==-1;};export default function PageOverview(_ref){let{rings,search:searchProp,items,config,leaving,onLeave}=_ref;const[ring,setRing]=useState(\"all\");const[search,setSearch]=useState(searchProp);const{pageOverview}=useMessages();const title=(pageOverview===null||pageOverview===void 0?void 0:pageOverview.title)||\"Technologies Overview\";useEffect(()=>{setSearch(searchProp);},[searchProp]);const handleRingClick=ring=>()=>{setRing(ring);};const isRingActive=ringName=>ring===ringName;const itemMatchesRing=item=>ring===\"all\"||item.ring===ring;const itemMatchesSearch=item=>{return search.trim()===\"\"||containsSearchTerm(item.title,search)||containsSearchTerm(item.body,search)||containsSearchTerm(item.info,search);};const isItemVisible=item=>itemMatchesRing(item)&&itemMatchesSearch(item);const getFilteredAndGroupedItems=()=>{const groups=groupByFirstLetter(items);const groupsFiltered=groups.map(group=>({...group,items:group.items.filter(isItemVisible)}));const nonEmptyGroups=groupsFiltered.filter(group=>group.items.length>0);return nonEmptyGroups;};const handleSearchTermChange=setSearch;const groups=getFilteredAndGroupedItems();return/*#__PURE__*/_jsxs(Fadeable,{leaving:leaving,onLeave:onLeave,children:[/*#__PURE__*/_jsx(SetTitle,{title:title}),/*#__PURE__*/_jsx(HeadlineGroup,{children:/*#__PURE__*/_jsx(HeroHeadline,{children:title})}),/*#__PURE__*/_jsx(\"div\",{className:\"filter\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"split split--filter\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"split__left\",children:/*#__PURE__*/_jsx(Search,{onChange:handleSearchTermChange,value:search})}),/*#__PURE__*/_jsx(\"div\",{className:\"split__right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"nav\",children:[\"all\",...rings].map(ringName=>/*#__PURE__*/_jsx(\"div\",{className:\"nav__item\",children:/*#__PURE__*/_jsx(Badge,{big:true,onClick:handleRingClick(ringName),type:isRingActive(ringName)?ringName:\"empty\",config:config,children:ringName})},ringName))})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"letter-index\",children:groups.map(_ref2=>{let{letter,items}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"letter-index__group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"letter-index__letter\",children:letter}),/*#__PURE__*/_jsx(\"div\",{className:\"letter-index__items\",children:/*#__PURE__*/_jsx(\"div\",{className:\"item-list\",children:/*#__PURE__*/_jsx(\"div\",{className:\"item-list__list\",children:items.map(item=>/*#__PURE__*/_jsx(Link,{className:\"item item--big item--no-leading-border item--no-trailing-border\",pageName:\"\".concat(item.quadrant,\"/\").concat(item.name),children:/*#__PURE__*/_jsxs(\"div\",{className:\"split split--overview\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"split__left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"item__title\",children:[item.title,/*#__PURE__*/_jsx(Flag,{item:item})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"split__right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"nav nav--relations\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"nav__item\",children:translate(config,item.quadrant)}),/*#__PURE__*/_jsx(\"div\",{className:\"nav__item\",children:/*#__PURE__*/_jsx(Badge,{type:item.ring,config:config,children:item.ring})})]})})]})},item.name))})})})]},letter);})})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}