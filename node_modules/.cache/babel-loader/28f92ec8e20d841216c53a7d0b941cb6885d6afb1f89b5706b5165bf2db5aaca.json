{"ast":null,"code":"export const createAnimation=(stateA,stateB,delay)=>({stateA,stateB,delay});const getAnimationStates=function(animations){let stateName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"stateA\";return animations.map(animation=>animation[stateName]);};const getMaxTransitionTime=transition=>{const re=/(\\d+)ms/g;const times=[];let matches;while((matches=re.exec(transition))!=null){times.push(parseInt(matches[1],10));}return Math.max(...times);};const getAnimationDuration=animation=>{if(animation instanceof Array){return animation.reduce((maxDuration,a)=>{const duration=getAnimationDuration(a);if(duration>maxDuration){return duration;}return maxDuration;},0);}const state=animation.stateB;const maxTransition=state.transition?getMaxTransitionTime(state.transition):0;return maxTransition+animation.delay;};const getMaxAnimationsDuration=animations=>Math.max(...Object.values(animations).map(animations=>getAnimationDuration(Object.values(animations))));export const createAnimationRunner=function(animationsIn){let subscriber=arguments.length>1&&arguments[1]!==undefined?arguments[1]:()=>{};const animations=Object.entries(animationsIn).reduce((state,_ref)=>{let[name,animation]=_ref;return{...state,[name]:animation instanceof Array?animation:[animation]};},{});let state=Object.entries(animations).reduce((state,_ref2)=>{let[name,animation]=_ref2;return{...state,[name]:getAnimationStates(animation)};},{});const animationsDuration=getMaxAnimationsDuration(animations);const animate=(name,animation)=>{animation.forEach((a,index)=>{window.requestAnimationFrame(()=>{window.setTimeout(()=>{var _state$name,_state$name2;state={...state,[name]:[...((_state$name=state[name])===null||_state$name===void 0?void 0:_state$name.slice(0,index)),a.stateB,...((_state$name2=state[name])===null||_state$name2===void 0?void 0:_state$name2.slice(index+1,state[name].length))]};subscriber();},a.delay);});});};return{getState(){return state;},run(){Object.entries(animations).forEach(_ref3=>{let[name,animation]=_ref3;animate(name,animation);});},awaitAnimationComplete(callback){window.setTimeout(callback,animationsDuration);}};};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}