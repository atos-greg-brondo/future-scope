{"ast":null,"code":"import classNames from\"classnames\";import React from\"react\";import{BrowserRouter,Navigate,Route,Routes,useParams}from\"react-router-dom\";import{publicUrl}from\"../config\";import{MessagesProvider}from\"../context/MessagesContext\";import{useSearchParamState}from\"../hooks/use-search-param-state\";import{filteredOnly,getTags}from\"../model\";import Footer from\"./Footer/Footer\";import Header from\"./Header/Header\";import Router from\"./Router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const useFetch=url=>{const[data,setData]=React.useState();React.useEffect(()=>{fetch(url).then(response=>response.json()).then(data=>{setData(data);}).catch(error=>{console.error(\"fetch \".concat(url,\" failed. Did the file exist?\"),error);});},[url]);return data;};const usePage=params=>{return(params[\"*\"]||\"\").replace(\".html\",\"\");};const useFilteredItems=_ref=>{let{items}=_ref;const[searchParamState]=useSearchParamState();const{tags}=searchParamState;return tags?filteredOnly(items,tags):items;};const RouterWithPageParam=_ref2=>{let{items,releases,config}=_ref2;const page=usePage(useParams());const[searchParamState]=useSearchParamState();const{search}=searchParamState;const filteredItems=useFilteredItems({items});return/*#__PURE__*/_jsx(Router,{pageName:page||\"\",search:search||\"\",items:filteredItems,releases:releases,config:config});};const HeaderWithPageParam=_ref3=>{let{items}=_ref3;const page=usePage(useParams());const tags=getTags(items);return/*#__PURE__*/_jsx(Header,{pageName:page||\"\",tags:tags});};const FooterWithPageParam=_ref4=>{let{items}=_ref4;const page=usePage(useParams());const filteredItems=useFilteredItems({items});return/*#__PURE__*/_jsx(Footer,{pageName:page||\"\",items:filteredItems});};export default function App(){const data=useFetch(\"\".concat(publicUrl,\"rd.json?\").concat(process.env.REACT_APP_BUILDHASH));const messages=useFetch(\"\".concat(publicUrl,\"messages.json?\").concat(process.env.REACT_APP_BUILDHASH));const config=useFetch(\"\".concat(publicUrl,\"config.json?\").concat(process.env.REACT_APP_BUILDHASH));if(data&&config){const{items,releases}=data;return/*#__PURE__*/_jsx(MessagesProvider,{messages:messages,children:/*#__PURE__*/_jsx(BrowserRouter,{basename:\"\".concat(publicUrl),children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/*\",element:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page__header\",children:/*#__PURE__*/_jsx(HeaderWithPageParam,{items:items})}),/*#__PURE__*/_jsx(\"div\",{className:classNames(\"page__content\"),children:/*#__PURE__*/_jsx(RouterWithPageParam,{config:config,items:items,releases:releases})}),/*#__PURE__*/_jsx(\"div\",{className:\"page__footer\",children:/*#__PURE__*/_jsx(FooterWithPageParam,{items:items})})]})})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{replace:true,to:\"/index.html\"})})]})})});}return null;}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}